<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Acme Corporation - Customer Status Tracker</title>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css?v=2">
  <style>
    .customer-header {
      background: linear-gradient(135deg, #161616 0%, #393939 100%);
      color: white;
      padding: var(--cds-spacing-06);
      margin: calc(-1 * var(--cds-spacing-06));
      margin-bottom: var(--cds-spacing-05);
    }
    .customer-header__top {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: var(--cds-spacing-05);
    }
    .customer-header__name {
      font-size: 2rem;
      font-weight: 600;
      margin-bottom: var(--cds-spacing-02);
    }
    .customer-header__meta {
      display: flex;
      gap: var(--cds-spacing-05);
      font-size: 0.875rem;
      opacity: 0.8;
    }
    .customer-header__stats {
      display: flex;
      gap: var(--cds-spacing-07);
    }
    .customer-header__stat {
      text-align: center;
    }
    .customer-header__stat-value {
      font-size: 1.5rem;
      font-weight: 600;
    }
    .customer-header__stat-label {
      font-size: 0.75rem;
      opacity: 0.7;
      text-transform: uppercase;
    }
    .section-title {
      font-size: 1.125rem;
      font-weight: 600;
      margin-bottom: var(--cds-spacing-04);
      display: flex;
      align-items: center;
      gap: var(--cds-spacing-03);
    }
    .adoption-stage {
      display: flex;
      gap: var(--cds-spacing-02);
      margin-bottom: var(--cds-spacing-05);
    }
    .adoption-stage__step {
      flex: 1;
      text-align: center;
      padding: var(--cds-spacing-03);
      background: var(--cds-layer-02);
      border-radius: 4px;
      font-size: 0.75rem;
      position: relative;
    }
    .adoption-stage__step::after {
      content: '';
      position: absolute;
      right: -8px;
      top: 50%;
      transform: translateY(-50%);
      border: 6px solid transparent;
      border-left-color: var(--cds-layer-02);
      z-index: 1;
    }
    .adoption-stage__step:last-child::after {
      display: none;
    }
    .adoption-stage__step.completed {
      background: var(--cds-support-success);
      color: white;
    }
    .adoption-stage__step.completed::after {
      border-left-color: var(--cds-support-success);
    }
    .adoption-stage__step.current {
      background: var(--cds-interactive);
      color: white;
    }
    .adoption-stage__step.current::after {
      border-left-color: var(--cds-interactive);
    }
    .checklist {
      list-style: none;
    }
    .checklist__item {
      display: flex;
      align-items: center;
      gap: var(--cds-spacing-03);
      padding: var(--cds-spacing-03) 0;
      border-bottom: 1px solid var(--cds-border-subtle-01);
    }
    .checklist__checkbox {
      width: 20px;
      height: 20px;
      border: 2px solid var(--cds-border-strong-01);
      border-radius: 2px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    .checklist__checkbox.checked {
      background: var(--cds-support-success);
      border-color: var(--cds-support-success);
      color: white;
    }
    .checklist__checkbox.in-progress {
      background: var(--cds-support-warning);
      border-color: var(--cds-support-warning);
    }
    .contact-card {
      display: flex;
      align-items: center;
      gap: var(--cds-spacing-04);
      padding: var(--cds-spacing-04);
      background: var(--cds-layer-02);
      border-radius: 4px;
      margin-bottom: var(--cds-spacing-03);
    }
    .contact-card__info {
      flex: 1;
    }
    .contact-card__name {
      font-weight: 500;
    }
    .contact-card__role {
      font-size: 0.75rem;
      color: var(--cds-text-secondary);
    }
    .contact-card__actions {
      display: flex;
      gap: var(--cds-spacing-02);
    }
    @media (max-width: 768px) {
      .customer-header {
        padding: var(--cds-spacing-05);
        margin: calc(-1 * var(--cds-spacing-05));
        margin-bottom: var(--cds-spacing-04);
      }
      .customer-header__top {
        flex-direction: column;
        gap: var(--cds-spacing-04);
      }
      .customer-header__name {
        font-size: 1.5rem;
      }
      .customer-header__stats {
        gap: var(--cds-spacing-05);
        flex-wrap: wrap;
      }
      .adoption-stage {
        flex-direction: column;
      }
      .adoption-stage__step::after {
        display: none;
      }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- Side Navigation -->
    <nav class="side-nav" id="sideNav">
      <div class="side-nav__header">
        <div class="side-nav__logo">CS</div>
        <span class="side-nav__title">CS Tracker</span>
      </div>
      <ul class="side-nav__items">
        <li class="side-nav__item">
          <a href="index.html" class="side-nav__link">
            <svg viewBox="0 0 32 32"><path d="M16 2L2 12v18h10V18h8v12h10V12L16 2zm12 26h-6V16H10v12H4V13.21l12-9 12 9V28z"/></svg>
            Dashboard
          </a>
        </li>
        <li class="side-nav__item">
          <a href="customers.html" class="side-nav__link active">
            <svg viewBox="0 0 32 32"><path d="M28 10h-6V6c0-1.1-.9-2-2-2h-8c-1.1 0-2 .9-2 2v4H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h24c1.1 0 2-.9 2-2V12c0-1.1-.9-2-2-2zM12 6h8v4h-8V6zm16 20H4V12h24v14z"/></svg>
            Customers
          </a>
        </li>
        <li class="side-nav__item">
          <a href="tasks.html" class="side-nav__link">
            <svg viewBox="0 0 32 32"><path d="M14 21.5l-5-4.96L7.59 18 14 24.35 25.41 13 24 11.59 14 21.5z"/><path d="M16 2C8.27 2 2 8.27 2 16s6.27 14 14 14 14-6.27 14-14S23.73 2 16 2zm0 26C9.38 28 4 22.62 4 16S9.38 4 16 4s12 5.38 12 12-5.38 12-12 12z"/></svg>
            Tasks
          </a>
        </li>
        <li class="side-nav__divider"></li>
        <li class="side-nav__item">
          <a href="reports.html" class="side-nav__link">
            <svg viewBox="0 0 32 32"><path d="M10 18H6v8h4v-8zm12-8h-4v16h4V10zm-6 6h-4v10h4V16z"/></svg>
            Reports
          </a>
        </li>
        <li class="side-nav__item">
          <a href="admin.html" class="side-nav__link">
            <svg viewBox="0 0 32 32"><path d="M27 16.76V16v-.77l1.92-1.68a2 2 0 00.4-2.4l-2-3.46a2 2 0 00-1.94-1 2 2 0 00-.64.1l-2.43.82a11.35 11.35 0 00-1.31-.75l-.51-2.52a2 2 0 00-2-1.61h-4a2 2 0 00-2 1.61l-.51 2.52a11.48 11.48 0 00-1.32.75l-2.38-.86a2 2 0 00-.68-.09 2 2 0 00-1.72 1l-2 3.46a2 2 0 00.4 2.4l1.92 1.68V16v.77l-1.92 1.68a2 2 0 00-.4 2.4l2 3.46a2 2 0 00 1.72 1 2 2 0 00.68-.09l2.42-.82a11.35 11.35 0 001.31.75l.51 2.52a2 2 0 002 1.61h4a2 2 0 002-1.61l.51-2.52a11.48 11.48 0 001.32-.75l2.42.82a2 2 0 00.64.09 2 2 0 001.72-1l2-3.46a2 2 0 00-.4-2.4zM16 22a6 6 0 116-6 6 6 0 01-6 6z"/></svg>
            Admin
          </a>
        </li>
      </ul>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Header -->
      <header class="header">
        <div class="header__left">
          <button class="hamburger" onclick="toggleNav()">
            <span></span>
            <span></span>
            <span></span>
          </button>
          <a href="customers.html" style="color: var(--cds-text-secondary); text-decoration: none; display: flex; align-items: center; gap: 8px;">
            <svg width="16" height="16" viewBox="0 0 32 32"><path d="M10 16L20 6l1.4 1.4-8.6 8.6 8.6 8.6L20 26z"/></svg>
            Back to Customers
          </a>
        </div>
        <div class="header__right">
          <button class="btn btn--tertiary">
            <svg width="16" height="16" viewBox="0 0 32 32" fill="currentColor"><path d="M4 4v2h2.586L2 10.586 3.414 12 8 7.414V10h2V4H4zm18 0v6h2V7.414L28.586 12 30 10.586 25.414 6H28V4H22z"/></svg>
            Export to PPT
          </button>
          <button class="btn btn--primary" onclick="openTaskModal()">
            <svg width="16" height="16" viewBox="0 0 32 32" fill="currentColor"><path d="M17 15V7h-2v8H7v2h8v8h2v-8h8v-2h-8z"/></svg>
            Add Task
          </button>
          <div class="user-menu">
            <div class="avatar user-avatar">CJ</div>
          </div>
        </div>
      </header>

      <!-- Page Content -->
      <div class="page-content">
        <!-- Customer Header -->
        <div class="customer-header">
          <div class="customer-header__top">
            <div>
              <h1 class="customer-header__name" id="customerName">Loading...</h1>
              <div class="customer-header__meta">
                <span id="customerSfId">-</span>
                <span>|</span>
                <span id="customerProducts">-</span>
                <span>|</span>
                <span id="customerSince"></span>
              </div>
            </div>
            <div style="display: flex; gap: 12px;">
              <span class="health-badge health-badge--gray" id="healthBadge" style="font-size: 14px; padding: 8px 16px;">-</span>
              <span class="tag tag--blue" id="partnerBadge" style="font-size: 14px; padding: 8px 16px; display: none;"></span>
            </div>
          </div>
          <div class="customer-header__stats">
            <div class="customer-header__stat">
              <div class="customer-header__stat-value" id="statArr">-</div>
              <div class="customer-header__stat-label">ARR</div>
            </div>
            <div class="customer-header__stat">
              <div class="customer-header__stat-value" id="statRenewal">-</div>
              <div class="customer-header__stat-label">Renewal</div>
            </div>
            <div class="customer-header__stat">
              <div class="customer-header__stat-value" id="statAdoption">-</div>
              <div class="customer-header__stat-label">Adoption</div>
            </div>
            <div class="customer-header__stat">
              <div class="customer-header__stat-value" id="statDaysToRenewal">-</div>
              <div class="customer-header__stat-label">Days to Renewal</div>
            </div>
          </div>
        </div>

        <!-- Tabs -->
        <nav class="tabs">
          <ul class="tabs__list">
            <li><a href="#" class="tabs__tab active">Overview</a></li>
            <li><a href="#" class="tabs__tab">Usage Framework</a></li>
            <li><a href="#" class="tabs__tab">Engagements</a></li>
            <li><a href="#" class="tabs__tab">Tasks</a></li>
            <li><a href="#" class="tabs__tab">Risks</a></li>
            <li><a href="#" class="tabs__tab">TargetProcess</a></li>
            <li><a href="#" class="tabs__tab">Roadmap</a></li>
            <li><a href="#" class="tabs__tab">Documents</a></li>
          </ul>
        </nav>

        <div class="grid grid--2">
          <!-- Left Column -->
          <div>
            <!-- Account Details -->
            <div class="card">
              <h2 class="section-title">
                <svg width="20" height="20" viewBox="0 0 32 32"><path d="M28 10h-6V6c0-1.1-.9-2-2-2h-8c-1.1 0-2 .9-2 2v4H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h24c1.1 0 2-.9 2-2V12c0-1.1-.9-2-2-2z"/></svg>
                Account Details
              </h2>
              <div class="grid grid--2" style="gap: 16px;">
                <div>
                  <div class="form-label">Account Manager</div>
                  <div style="font-weight: 500;" id="accountManager">-</div>
                </div>
                <div>
                  <div class="form-label">CSM Owner</div>
                  <div style="font-weight: 500;" id="csmOwner">-</div>
                </div>
                <div>
                  <div class="form-label">Industry</div>
                  <div id="customerIndustry">-</div>
                </div>
                <div>
                  <div class="form-label">Employees</div>
                  <div id="customerEmployees">-</div>
                </div>
                <div>
                  <div class="form-label">Contract Start</div>
                  <div id="contractStart">-</div>
                </div>
                <div>
                  <div class="form-label">Contract End</div>
                  <div id="contractEnd">-</div>
                </div>
              </div>
            </div>

            <!-- Adoption Journey -->
            <div class="card">
              <h2 class="section-title">
                <svg width="20" height="20" viewBox="0 0 32 32"><path d="M12 29a1 1 0 01-.92-.62L6.33 17H2v-2h5a1 1 0 01.92.62L12 25.28l8.06-21.63A1 1 0 0121 3a1 1 0 01.93.68L25.74 15H30v2h-5a1 1 0 01-.95-.68L21 7.04l-8.05 21.34A1 1 0 0112 29z"/></svg>
                Adoption Journey
              </h2>
              <div class="adoption-stage">
                <div class="adoption-stage__step" id="stage-onboarding">
                  <strong>Onboarding</strong>
                  <div>-</div>
                </div>
                <div class="adoption-stage__step" id="stage-adoption">
                  <strong>Adoption</strong>
                  <div>-</div>
                </div>
                <div class="adoption-stage__step" id="stage-value_realization">
                  <strong>Value Realization</strong>
                  <div>-</div>
                </div>
                <div class="adoption-stage__step" id="stage-expansion">
                  <strong>Expansion</strong>
                  <div>-</div>
                </div>
                <div class="adoption-stage__step" id="stage-renewal">
                  <strong>Renewal</strong>
                  <div>-</div>
                </div>
              </div>
            </div>

            <!-- Use Case Tracker -->
            <div class="card">
              <div class="card__header">
                <h2 class="section-title" style="margin-bottom: 0;">
                  <svg width="20" height="20" viewBox="0 0 32 32"><path d="M14 21.5l-5-4.96L7.59 18 14 24.35 25.41 13 24 11.59 14 21.5z"/></svg>
                  Use Case Tracker
                </h2>
                <span id="useCaseProgress" class="tag tag--blue">Loading...</span>
              </div>
              <div class="progress mb-4" style="height: 12px;">
                <div id="useCaseProgressBar" class="progress__bar progress__bar--success" style="width: 0%;"></div>
              </div>

              <!-- Solution Area Tabs -->
              <div id="solutionAreaTabs" class="tabs mb-4" style="border-bottom: 1px solid var(--cds-border-subtle); display: flex; gap: 0;">
                <button class="tab-btn active" data-area="WFM" style="padding: 8px 16px; border: none; background: none; cursor: pointer; border-bottom: 2px solid var(--cds-interactive); font-weight: 500;">WFM</button>
                <button class="tab-btn" data-area="HPM" style="padding: 8px 16px; border: none; background: none; cursor: pointer; color: var(--cds-text-secondary);">HPM</button>
                <button class="tab-btn" data-area="EAP" style="padding: 8px 16px; border: none; background: none; cursor: pointer; color: var(--cds-text-secondary);">EAP</button>
                <button class="tab-btn" data-area="POM" style="padding: 8px 16px; border: none; background: none; cursor: pointer; color: var(--cds-text-secondary);">POM</button>
                <button class="tab-btn" data-area="FPM" style="padding: 8px 16px; border: none; background: none; cursor: pointer; color: var(--cds-text-secondary);">FPM</button>
              </div>

              <!-- Use Cases Container -->
              <div id="useCasesContainer">
                <div class="text-secondary text-center" style="padding: 24px;">Loading use cases...</div>
              </div>
            </div>
          </div>

          <!-- Right Column -->
          <div>
            <!-- Health Score -->
            <div class="card">
              <h2 class="section-title">
                <svg width="20" height="20" viewBox="0 0 32 32"><path d="M16 2a14 14 0 1014 14A14 14 0 0016 2zm0 26a12 12 0 1112-12 12 12 0 01-12 12z"/><path d="M16 8a8 8 0 108 8 8 8 0 00-8-8zm0 14a6 6 0 116-6 6 6 0 01-6 6z"/></svg>
                Health Score
                <span style="margin-left: auto; font-size: 12px; color: var(--cds-text-secondary);">from Gainsight</span>
              </h2>
              <div id="healthScoreContainer" class="flex gap-5 flex-center">
                <div style="text-align: center;">
                  <div id="healthScoreCircle" style="width: 100px; height: 100px; border-radius: 50%; background: conic-gradient(var(--health-green) 0deg 306deg, var(--cds-background-hover) 306deg 360deg); display: flex; align-items: center; justify-content: center;">
                    <div id="healthScoreValue" style="width: 70px; height: 70px; border-radius: 50%; background: white; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: 600; color: var(--health-green);">-</div>
                  </div>
                  <div class="text-secondary mt-2" style="font-size: 12px;">Score</div>
                </div>
                <div style="flex: 1;">
                  <div class="flex flex-between mb-2">
                    <span class="text-secondary">30-day trend</span>
                    <span id="healthTrend" class="text-success">-</span>
                  </div>
                  <div class="flex flex-between mb-2">
                    <span class="text-secondary">Product Usage</span>
                    <span id="productUsage">-</span>
                  </div>
                  <div class="flex flex-between mb-2">
                    <span class="text-secondary">Engagement</span>
                    <span id="engagementLevel">-</span>
                  </div>
                  <div class="flex flex-between">
                    <span class="text-secondary">Support Tickets</span>
                    <span id="supportTickets">-</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Key Contacts -->
            <div class="card">
              <div class="card__header">
                <h2 class="section-title" style="margin-bottom: 0;">
                  <svg width="20" height="20" viewBox="0 0 32 32"><path d="M16 4a5 5 0 11-5 5 5 5 0 015-5m0-2a7 7 0 107 7 7 7 0 00-7-7zM26 30h-2v-5a5 5 0 00-5-5h-6a5 5 0 00-5 5v5H6v-5a7 7 0 017-7h6a7 7 0 017 7z"/></svg>
                  Key Contacts
                </h2>
                <button class="btn btn--ghost btn--icon">
                  <svg width="16" height="16" viewBox="0 0 32 32"><path d="M17 15V7h-2v8H7v2h8v8h2v-8h8v-2h-8z"/></svg>
                </button>
              </div>
              <div id="keyContactsContainer">
                <div class="text-secondary text-center" style="padding: 16px;">Loading contacts...</div>
              </div>
            </div>

            <!-- Open Tasks -->
            <div class="card">
              <div class="card__header">
                <h2 class="section-title" style="margin-bottom: 0;">
                  <svg width="20" height="20" viewBox="0 0 32 32"><path d="M14 21.5l-5-4.96L7.59 18 14 24.35 25.41 13 24 11.59 14 21.5z"/></svg>
                  Open Tasks
                </h2>
                <span id="openTasksCount" class="tag">- Tasks</span>
              </div>
              <div id="openTasksContainer">
                <div class="text-secondary text-center" style="padding: 16px;">Loading tasks...</div>
              </div>
            </div>

            <!-- Open Risks -->
            <div class="card">
              <div class="card__header">
                <h2 class="section-title" style="margin-bottom: 0;">
                  <svg width="20" height="20" viewBox="0 0 32 32"><path d="M16 2a14 14 0 1014 14A14 14 0 0016 2zm0 26a12 12 0 1112-12 12 12 0 01-12 12z"/><path d="M15 8h2v11h-2zm1 14a1.5 1.5 0 101.5 1.5A1.5 1.5 0 0016 22z"/></svg>
                  Open Risks
                </h2>
                <span id="openRisksCount" class="tag">- Risks</span>
              </div>
              <div id="openRisksContainer">
                <div class="text-secondary text-center" style="padding: 16px;">Loading risks...</div>
              </div>
            </div>

            <!-- Recent Engagements -->
            <div class="card">
              <div class="card__header">
                <h2 class="section-title" style="margin-bottom: 0;">
                  <svg width="20" height="20" viewBox="0 0 32 32"><path d="M17.74 30L16 29l4-7h6a2 2 0 002-2V8a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2h9v2H6a4 4 0 01-4-4V8a4 4 0 014-4h20a4 4 0 014 4v12a4 4 0 01-4 4h-4.84z"/></svg>
                  Recent Engagements
                </h2>
                <button class="btn btn--ghost">View All</button>
              </div>
              <div id="recentEngagementsContainer" class="timeline">
                <div class="text-secondary text-center" style="padding: 16px;">Loading engagements...</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Tasks Section (shown when Tasks tab is active) -->
        <div class="card mt-5" id="tasksSection" style="display: none;">
          <div class="card__header">
            <h2 class="section-title" style="margin-bottom: 0;">
              <svg width="20" height="20" viewBox="0 0 32 32"><path d="M14 21.5l-5-4.96L7.59 18 14 24.35 25.41 13 24 11.59 14 21.5z"/><path d="M16 2C8.27 2 2 8.27 2 16s6.27 14 14 14 14-6.27 14-14S23.73 2 16 2zm0 26C9.38 28 4 22.62 4 16S9.38 4 16 4s12 5.38 12 12-5.38 12-12 12z"/></svg>
              Customer Tasks
            </h2>
            <div class="flex gap-3">
              <span class="tag" id="tasksTabCount">0 Tasks</span>
              <button class="btn btn--primary btn--icon" onclick="openTaskModal()">
                <svg width="16" height="16" viewBox="0 0 32 32"><path d="M17 15V7h-2v8H7v2h8v8h2v-8h8v-2h-8z"/></svg>
                Add Task
              </button>
            </div>
          </div>
          <div id="tasksTabContainer" style="padding: 16px;">
            <div class="text-secondary text-center">Loading tasks...</div>
          </div>
        </div>

        <!-- Risks Section (shown when Risks tab is active) -->
        <div class="card mt-5" id="risksSection" style="display: none;">
          <div class="card__header">
            <h2 class="section-title" style="margin-bottom: 0;">
              <svg width="20" height="20" viewBox="0 0 32 32"><path d="M16 2a14 14 0 1014 14A14 14 0 0016 2zm0 26a12 12 0 1112-12 12 12 0 01-12 12z"/><path d="M15 8h2v11h-2zm1 14a1.5 1.5 0 101.5 1.5A1.5 1.5 0 0016 22z"/></svg>
              Customer Risks
            </h2>
            <div class="flex gap-3">
              <span class="tag" id="risksTabCount">0 Risks</span>
              <button class="btn btn--primary btn--icon" onclick="openRiskModal()">
                <svg width="16" height="16" viewBox="0 0 32 32"><path d="M17 15V7h-2v8H7v2h8v8h2v-8h8v-2h-8z"/></svg>
                Add Risk
              </button>
            </div>
          </div>
          <div id="risksTabContainer" style="padding: 16px;">
            <div class="text-secondary text-center">Loading risks...</div>
          </div>
        </div>

        <!-- Product Roadmap Section -->
        <div class="card mt-5" id="roadmapSection">
          <div class="card__header">
            <h2 class="section-title" style="margin-bottom: 0;">
              <svg width="20" height="20" viewBox="0 0 32 32"><path d="M28 4H4a2 2 0 00-2 2v20a2 2 0 002 2h24a2 2 0 002-2V6a2 2 0 00-2-2zM4 26V6h24v20z"/><path d="M6 12h4v2H6zm0 5h4v2H6zm0 5h4v2H6zm6-10h14v2H12zm0 5h14v2H12zm0 5h14v2H12z"/></svg>
              Product Roadmap
            </h2>
            <div class="flex gap-3">
              <span class="tag" id="roadmapTimeframe" style="display: none;">-</span>
              <button class="btn btn--ghost btn--icon" id="addRoadmapItemBtn" title="Add Item" onclick="openRoadmapItemModal()" style="display: none;">
                <svg width="16" height="16" viewBox="0 0 32 32"><path d="M17 15V7h-2v8H7v2h8v8h2v-8h8v-2h-8z"/></svg>
              </button>
              <button class="btn btn--ghost btn--icon" id="pushToTPBtn" title="Push to TargetProcess" onclick="openPushToTPModal()" style="display: none;">
                <svg width="16" height="16" viewBox="0 0 32 32"><path d="M12 10H6v2h6v6h2v-6h6v-2h-6V4h-2v6z"/><path d="M28 18v8H4V6h10V4H4a2 2 0 00-2 2v20a2 2 0 002 2h24a2 2 0 002-2v-8z"/></svg>
              </button>
              <button class="btn btn--ghost btn--icon" id="roadmapSettingsBtn" title="Roadmap Settings" onclick="openCreateRoadmapModal()">
                <svg width="16" height="16" viewBox="0 0 32 32"><path d="M27 16.76V16v-.77l1.92-1.68a2 2 0 00.4-2.4l-2-3.46a2 2 0 00-1.94-1 2 2 0 00-.64.1l-2.43.82a11.35 11.35 0 00-1.31-.75l-.51-2.52a2 2 0 00-2-1.61h-4a2 2 0 00-2 1.61l-.51 2.52a11.48 11.48 0 00-1.32.75l-2.38-.86a2 2 0 00-.68-.09 2 2 0 00-1.72 1l-2 3.46a2 2 0 00.4 2.4l1.92 1.68V16v.77l-1.92 1.68a2 2 0 00-.4 2.4l2 3.46a2 2 0 00 1.72 1 2 2 0 00.68-.09l2.42-.82a11.35 11.35 0 001.31.75l.51 2.52a2 2 0 002 1.61h4a2 2 0 002-1.61l.51-2.52a11.48 11.48 0 001.32-.75l2.42.82a2 2 0 00.64.09 2 2 0 001.72-1l2-3.46a2 2 0 00-.4-2.4zM16 22a6 6 0 116-6 6 6 0 01-6 6z"/></svg>
              </button>
            </div>
          </div>

          <!-- No Roadmap State -->
          <div id="noRoadmapState" style="display: none; text-align: center; padding: 48px 24px;">
            <svg width="48" height="48" viewBox="0 0 32 32" style="color: var(--cds-text-secondary); margin-bottom: 16px;"><path d="M28 4H4a2 2 0 00-2 2v20a2 2 0 002 2h24a2 2 0 002-2V6a2 2 0 00-2-2zM4 26V6h24v20z"/></svg>
            <h3 style="margin-bottom: 8px; font-size: 16px;">No Roadmap Created</h3>
            <p style="color: var(--cds-text-secondary); margin-bottom: 16px;">Create a product roadmap to track planned features and milestones.</p>
            <button class="btn btn--primary" onclick="openCreateRoadmapModal()">Create Roadmap</button>
          </div>

          <!-- Roadmap Content -->
          <div id="roadmapContent" style="display: none;">
            <!-- Roadmap Timeline -->
            <div style="overflow-x: auto; padding: 16px 0;">
              <div style="min-width: 900px;">
                <!-- Quarter Headers -->
                <div id="quarterHeaders" style="display: grid; grid-template-columns: 150px repeat(8, 1fr); gap: 4px; margin-bottom: 16px;">
                  <div style="font-weight: 600; font-size: 12px; color: var(--cds-text-secondary);">Category</div>
                </div>

                <!-- Roadmap Items Container -->
                <div id="roadmapItemsContainer"></div>
              </div>
            </div>

            <!-- Legend -->
            <div style="display: flex; gap: 24px; padding-top: 16px; border-top: 1px solid var(--cds-border-subtle-01); flex-wrap: wrap;">
              <div style="display: flex; align-items: center; gap: 8px; font-size: 12px;">
                <div style="width: 12px; height: 12px; background: var(--cds-interactive); border-radius: 2px;"></div>
                <span>In Progress</span>
              </div>
              <div style="display: flex; align-items: center; gap: 8px; font-size: 12px;">
                <div style="width: 12px; height: 12px; background: #8a3ffc; border-radius: 2px;"></div>
                <span>Planned</span>
              </div>
              <div style="display: flex; align-items: center; gap: 8px; font-size: 12px;">
                <div style="width: 12px; height: 12px; background: var(--cds-support-success); border-radius: 2px;"></div>
                <span>Completed</span>
              </div>
              <div style="display: flex; align-items: center; gap: 8px; font-size: 12px;">
                <div style="width: 12px; height: 12px; background: var(--cds-support-warning); border-radius: 2px;"></div>
                <span>Delayed</span>
              </div>
              <div style="display: flex; align-items: center; gap: 8px; font-size: 12px;">
                <div style="width: 12px; height: 12px; background: var(--cds-support-error); border-radius: 2px;"></div>
                <span>Cancelled</span>
              </div>
            </div>

            <!-- Last Updated -->
            <div id="roadmapLastUpdated" style="margin-top: 16px; font-size: 12px; color: var(--cds-text-secondary);"></div>
          </div>
        </div>

        <!-- Engagements Section (shown when Engagements tab is active) -->
        <div class="card mt-5" id="engagementsSection" style="display: none;">
          <div class="card__header">
            <h2 class="section-title" style="margin-bottom: 0;">
              <svg width="20" height="20" viewBox="0 0 32 32"><path d="M17.74 30L16 29l4-7h6a2 2 0 002-2V8a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2h9v2H6a4 4 0 01-4-4V8a4 4 0 014-4h20a4 4 0 014 4v12a4 4 0 01-4 4h-4.84z"/></svg>
              Customer Engagements
            </h2>
            <div class="flex gap-3">
              <select id="engagementFilter" class="form-select" style="min-width: 120px;" onchange="filterEngagements()">
                <option value="all">All Types</option>
                <option value="meeting">Meetings</option>
                <option value="call">Calls</option>
                <option value="email">Emails</option>
                <option value="qbr">QBRs</option>
                <option value="training">Training</option>
                <option value="support">Support</option>
              </select>
              <button class="btn btn--primary btn--icon" onclick="openEngagementModal()">
                <svg width="16" height="16" viewBox="0 0 32 32"><path d="M17 15V7h-2v8H7v2h8v8h2v-8h8v-2h-8z"/></svg>
                Log Engagement
              </button>
            </div>
          </div>
          <div id="engagementsTabContainer" style="padding: 16px;">
            <div class="text-secondary text-center">Loading engagements...</div>
          </div>
        </div>

        <!-- TargetProcess Section (shown when TargetProcess tab is active) -->
        <div class="card mt-5" id="targetprocessSection" style="display: none;">
          <div class="card__header">
            <h2 class="section-title" style="margin-bottom: 0;">
              <svg width="20" height="20" viewBox="0 0 32 32"><path d="M28 4H4a2 2 0 00-2 2v20a2 2 0 002 2h24a2 2 0 002-2V6a2 2 0 00-2-2zM4 26V6h24v20z"/><path d="M6 12h4v2H6zm0 5h4v2H6zm0 5h4v2H6zm6-10h14v2H12zm0 5h14v2H12zm0 5h14v2H12z"/></svg>
              TargetProcess Integration
            </h2>
            <div class="flex gap-3">
              <button class="btn btn--ghost" onclick="refreshTPData()">
                <svg width="16" height="16" viewBox="0 0 32 32"><path d="M12 10H6.78A11 11 0 0127 16h2A13 13 0 006 7.68V4H4v8h8zm8 12h5.22A11 11 0 015 16H3a13 13 0 0023 8.32V28h2v-8h-8z"/></svg>
                Refresh
              </button>
            </div>
          </div>
          <div id="tpTabContainer" style="padding: 16px;">
            <!-- TP Stats Row -->
            <div class="grid grid--4 mb-5" id="tpStatsRow">
              <div class="metric-card">
                <div class="metric-card__label">User Stories</div>
                <div class="metric-card__value" id="tpUserStories">-</div>
              </div>
              <div class="metric-card">
                <div class="metric-card__label">Features</div>
                <div class="metric-card__value" id="tpFeatures">-</div>
              </div>
              <div class="metric-card">
                <div class="metric-card__label">Bugs</div>
                <div class="metric-card__value" id="tpBugs">-</div>
              </div>
              <div class="metric-card">
                <div class="metric-card__label">In Progress</div>
                <div class="metric-card__value" id="tpInProgress">-</div>
              </div>
            </div>
            <!-- TP Items List -->
            <div id="tpItemsList">
              <div class="text-secondary text-center" style="padding: 24px;">Loading TargetProcess data...</div>
            </div>
          </div>
        </div>

        <!-- Documents Section (shown when Documents tab is active) -->
        <div class="card mt-5" id="documentsSection" style="display: none;">
          <div class="card__header">
            <h2 class="section-title" style="margin-bottom: 0;">
              <svg width="20" height="20" viewBox="0 0 32 32"><path d="M25.7 9.3l-7-7A.91.91 0 0018 2H8a2 2 0 00-2 2v24a2 2 0 002 2h16a2 2 0 002-2V10a.91.91 0 00-.3-.7zM18 4.4l5.6 5.6H18zM24 28H8V4h8v6a2 2 0 002 2h6z"/><path d="M10 22h12v2H10zm0-6h12v2H10z"/></svg>
              Customer Documents
            </h2>
            <div class="flex gap-3">
              <select id="documentFilter" class="form-select" style="min-width: 120px;" onchange="filterDocuments()">
                <option value="all">All Types</option>
                <option value="contract">Contracts</option>
                <option value="sow">SOWs</option>
                <option value="presentation">Presentations</option>
                <option value="report">Reports</option>
                <option value="other">Other</option>
              </select>
              <button class="btn btn--primary btn--icon" onclick="openDocumentModal()">
                <svg width="16" height="16" viewBox="0 0 32 32"><path d="M17 15V7h-2v8H7v2h8v8h2v-8h8v-2h-8z"/></svg>
                Upload Document
              </button>
            </div>
          </div>
          <div id="documentsTabContainer" style="padding: 16px;">
            <div class="text-secondary text-center">Loading documents...</div>
          </div>
        </div>

        <!-- Usage Framework Section (shown when Usage Framework tab is active) -->
        <div class="card mt-5" id="usageFrameworkSection" style="display: none;">
          <div class="card__header">
            <h2 class="section-title" style="margin-bottom: 0;">
              <svg width="20" height="20" viewBox="0 0 32 32"><path d="M10 18H6v8h4v-8zm12-8h-4v16h4V10zm-6 6h-4v10h4V16z"/></svg>
              Usage Framework
            </h2>
            <div class="flex gap-3">
              <select id="usageTimeframe" class="form-select" style="min-width: 120px;" onchange="updateUsageTimeframe()">
                <option value="30">Last 30 Days</option>
                <option value="90" selected>Last 90 Days</option>
                <option value="180">Last 6 Months</option>
                <option value="365">Last Year</option>
              </select>
            </div>
          </div>
          <div id="usageFrameworkContainer" style="padding: 16px;">
            <!-- Usage Metrics Row -->
            <div class="grid grid--4 mb-5">
              <div class="metric-card">
                <div class="metric-card__label">Active Users</div>
                <div class="metric-card__value" id="ufActiveUsers">-</div>
                <div class="metric-card__trend" id="ufActiveUsersTrend">-</div>
              </div>
              <div class="metric-card">
                <div class="metric-card__label">Login Frequency</div>
                <div class="metric-card__value" id="ufLoginFreq">-</div>
                <div class="metric-card__trend" id="ufLoginFreqTrend">-</div>
              </div>
              <div class="metric-card">
                <div class="metric-card__label">Feature Adoption</div>
                <div class="metric-card__value" id="ufFeatureAdoption">-</div>
                <div class="metric-card__trend" id="ufFeatureAdoptionTrend">-</div>
              </div>
              <div class="metric-card">
                <div class="metric-card__label">Engagement Score</div>
                <div class="metric-card__value" id="ufEngagementScore">-</div>
                <div class="metric-card__trend" id="ufEngagementScoreTrend">-</div>
              </div>
            </div>

            <!-- Feature Usage Breakdown -->
            <h3 style="font-size: 14px; font-weight: 600; margin-bottom: 16px;">Feature Usage Breakdown</h3>
            <div id="featureUsageList">
              <div class="text-secondary text-center" style="padding: 24px;">Loading usage data...</div>
            </div>
          </div>
        </div>

        <!-- Roadmap Item Modal -->
        <div class="modal" id="roadmapItemModal">
          <div class="modal__overlay" onclick="closeRoadmapItemModal()"></div>
          <div class="modal__container" style="max-width: 600px;">
            <div class="modal__header">
              <h2 class="modal__title" id="roadmapItemModalTitle">Add Roadmap Item</h2>
              <button class="modal__close" onclick="closeRoadmapItemModal()">&times;</button>
            </div>
            <form id="roadmapItemForm" onsubmit="handleRoadmapItemSubmit(event)">
              <div class="modal__body">
                <input type="hidden" id="roadmapItemId" value="">

                <div class="form-group">
                  <label class="form-label" for="roadmapItemTitle">Title *</label>
                  <input type="text" id="roadmapItemTitle" class="text-input" required placeholder="e.g., Executive Dashboard">
                </div>

                <div class="form-group">
                  <label class="form-label" for="roadmapItemDescription">Description</label>
                  <textarea id="roadmapItemDescription" class="text-input" rows="3" placeholder="Brief description of this item"></textarea>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label class="form-label" for="roadmapItemCategory">Category *</label>
                    <select id="roadmapItemCategory" class="select-input" required>
                      <option value="feature">Feature</option>
                      <option value="enhancement">Enhancement</option>
                      <option value="integration">Integration</option>
                      <option value="migration">Migration</option>
                      <option value="optimization">Optimization</option>
                      <option value="other">Other</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label class="form-label" for="roadmapItemStatus">Status *</label>
                    <select id="roadmapItemStatus" class="select-input" required>
                      <option value="planned">Planned</option>
                      <option value="in_progress">In Progress</option>
                      <option value="completed">Completed</option>
                      <option value="delayed">Delayed</option>
                      <option value="cancelled">Cancelled</option>
                    </select>
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label class="form-label" for="roadmapItemStartDate">Start Date *</label>
                    <input type="date" id="roadmapItemStartDate" class="text-input" required>
                  </div>
                  <div class="form-group">
                    <label class="form-label" for="roadmapItemDuration">Duration</label>
                    <select id="roadmapItemDuration" class="select-input" onchange="updateEndDateFromDuration()">
                      <option value="">Custom end date</option>
                      <option value="1">1 month</option>
                      <option value="2">2 months</option>
                      <option value="3">3 months (1 quarter)</option>
                      <option value="6">6 months (2 quarters)</option>
                      <option value="9">9 months (3 quarters)</option>
                      <option value="12">12 months (1 year)</option>
                    </select>
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label class="form-label" for="roadmapItemEndDate">End Date *</label>
                    <input type="date" id="roadmapItemEndDate" class="text-input" required>
                  </div>
                  <div class="form-group">
                    <label class="form-label" for="roadmapItemProgress">Progress (%)</label>
                    <input type="number" id="roadmapItemProgress" class="text-input" min="0" max="100" value="0">
                  </div>
                </div>

                <div class="form-group">
                  <label class="form-label" for="roadmapItemNotes">Notes</label>
                  <textarea id="roadmapItemNotes" class="text-input" rows="2" placeholder="Additional notes or updates"></textarea>
                </div>
              </div>
              <div class="modal__footer">
                <button type="button" class="btn btn--danger" id="roadmapItemDeleteBtn" style="display: none; margin-right: auto;" onclick="deleteRoadmapItem(document.getElementById('roadmapItemId').value)">Delete</button>
                <button type="button" class="btn btn--secondary" onclick="closeRoadmapItemModal()">Cancel</button>
                <button type="submit" class="btn btn--primary" id="roadmapItemSubmitBtn">Add Item</button>
              </div>
            </form>
          </div>
        </div>

        <!-- Create Roadmap Modal -->
        <div class="modal" id="createRoadmapModal">
          <div class="modal__overlay" onclick="closeCreateRoadmapModal()"></div>
          <div class="modal__container" style="max-width: 500px;">
            <div class="modal__header">
              <h2 class="modal__title">Create Product Roadmap</h2>
              <button class="modal__close" onclick="closeCreateRoadmapModal()">&times;</button>
            </div>
            <form id="createRoadmapForm" onsubmit="handleCreateRoadmap(event)">
              <div class="modal__body">
                <div class="form-group">
                  <label class="form-label" for="roadmapName">Roadmap Name</label>
                  <input type="text" id="roadmapName" class="text-input" value="Product Roadmap" placeholder="Product Roadmap">
                </div>

                <div class="form-group">
                  <label class="form-label" for="roadmapDescription">Description</label>
                  <textarea id="roadmapDescription" class="text-input" rows="2" placeholder="Optional description"></textarea>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label class="form-label" for="roadmapStartDate">Start Date *</label>
                    <input type="date" id="roadmapStartDate" class="text-input" required>
                  </div>
                  <div class="form-group">
                    <label class="form-label" for="roadmapEndDate">End Date *</label>
                    <input type="date" id="roadmapEndDate" class="text-input" required>
                  </div>
                </div>
              </div>
              <div class="modal__footer">
                <button type="button" class="btn btn--secondary" onclick="closeCreateRoadmapModal()">Cancel</button>
                <button type="submit" class="btn btn--primary">Create Roadmap</button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Push to TargetProcess Modal -->
      <div class="modal" id="pushToTPModal">
        <div class="modal__overlay" onclick="closePushToTPModal()"></div>
        <div class="modal__container" style="max-width: 600px;">
          <div class="modal__header">
            <h2 class="modal__title">Push Roadmap to TargetProcess</h2>
            <button class="modal__close" onclick="closePushToTPModal()">&times;</button>
          </div>
          <div class="modal__body">
            <p style="margin-bottom: 16px; color: var(--cds-text-secondary);">
              The following roadmap items will be created as Features in TargetProcess:
            </p>

            <!-- Items to Push -->
            <div id="tpPushItemsList" style="max-height: 300px; overflow-y: auto; margin-bottom: 16px;">
              <!-- Items will be populated by JS -->
            </div>

            <!-- Project Selection -->
            <div class="form-group">
              <label class="form-label" for="tpProjectSelect">Target Project *</label>
              <select id="tpProjectSelect" class="select-input" required>
                <option value="">Select a project...</option>
                <option value="roadmap">Product Roadmap</option>
                <option value="customer-features">Customer Features</option>
                <option value="platform">Platform Development</option>
              </select>
            </div>

            <!-- Options -->
            <div class="form-group">
              <label class="form-label">Options</label>
              <div style="display: flex; flex-direction: column; gap: 8px;">
                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                  <input type="checkbox" id="tpLinkToCustomer" checked>
                  <span>Link features to customer</span>
                </label>
                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                  <input type="checkbox" id="tpIncludeDates" checked>
                  <span>Include planned dates</span>
                </label>
                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                  <input type="checkbox" id="tpSkipExisting">
                  <span>Skip items already in TargetProcess</span>
                </label>
              </div>
            </div>

            <!-- Status Message -->
            <div id="tpPushStatus" style="display: none; padding: 12px; border-radius: 4px; margin-top: 16px;">
            </div>
          </div>
          <div class="modal__footer">
            <button type="button" class="btn btn--secondary" onclick="closePushToTPModal()">Cancel</button>
            <button type="button" class="btn btn--primary" id="tpPushBtn" onclick="handlePushToTP()">
              <svg width="16" height="16" viewBox="0 0 32 32" style="margin-right: 8px;"><path d="M12 10H6v2h6v6h2v-6h6v-2h-6V4h-2v6z"/><path d="M28 18v8H4V6h10V4H4a2 2 0 00-2 2v20a2 2 0 002 2h24a2 2 0 002-2v-8z"/></svg>
              Push to TargetProcess
            </button>
          </div>
        </div>
      </div>

      <!-- Risk Modal -->
      <div class="modal" id="riskModal">
        <div class="modal__overlay" onclick="closeRiskModal()"></div>
        <div class="modal__container" style="max-width: 600px;">
          <div class="modal__header">
            <h2 class="modal__title" id="riskModalTitle">Add Risk</h2>
            <button class="modal__close" onclick="closeRiskModal()">&times;</button>
          </div>
          <form id="riskForm" onsubmit="handleRiskSubmit(event)">
            <input type="hidden" id="riskId" value="">
            <div class="modal__body">
              <div class="form-group">
                <label class="form-label" for="riskTitle">Title *</label>
                <input type="text" id="riskTitle" class="form-input" required placeholder="Brief description of the risk">
              </div>

              <div class="grid grid--2" style="gap: 16px;">
                <div class="form-group">
                  <label class="form-label" for="riskSeverity">Severity</label>
                  <select id="riskSeverity" class="form-select">
                    <option value="low">Low</option>
                    <option value="medium" selected>Medium</option>
                    <option value="high">High</option>
                    <option value="critical">Critical</option>
                  </select>
                </div>
                <div class="form-group">
                  <label class="form-label" for="riskCategory">Category</label>
                  <select id="riskCategory" class="form-select">
                    <option value="">Select category...</option>
                    <option value="adoption">Adoption</option>
                    <option value="renewal">Renewal</option>
                    <option value="technical">Technical</option>
                    <option value="relationship">Relationship</option>
                    <option value="financial">Financial</option>
                    <option value="other">Other</option>
                  </select>
                </div>
              </div>

              <div class="form-group">
                <label class="form-label" for="riskDescription">Description</label>
                <textarea id="riskDescription" class="form-textarea" rows="2" placeholder="Detailed description of the risk"></textarea>
              </div>

              <div class="form-group">
                <label class="form-label" for="riskImpact">Potential Impact</label>
                <textarea id="riskImpact" class="form-textarea" rows="2" placeholder="What could happen if this risk materializes?"></textarea>
              </div>

              <div class="form-group">
                <label class="form-label" for="riskMitigation">Mitigation Plan</label>
                <textarea id="riskMitigation" class="form-textarea" rows="2" placeholder="Steps being taken to address this risk"></textarea>
              </div>

              <div class="grid grid--2" style="gap: 16px;">
                <div class="form-group">
                  <label class="form-label" for="riskOwner">Owner</label>
                  <select id="riskOwner" class="form-select">
                    <option value="">Unassigned</option>
                  </select>
                </div>
                <div class="form-group">
                  <label class="form-label" for="riskDueDate">Target Resolution Date</label>
                  <input type="date" id="riskDueDate" class="form-input">
                </div>
              </div>

              <!-- Status (only shown when editing) -->
              <div class="form-group" id="riskStatusGroup" style="display: none;">
                <label class="form-label" for="riskStatus">Status</label>
                <select id="riskStatus" class="form-select">
                  <option value="open">Open</option>
                  <option value="mitigating">Mitigating</option>
                  <option value="resolved">Resolved</option>
                  <option value="accepted">Accepted</option>
                </select>
              </div>
            </div>
            <div class="modal__footer">
              <button type="button" class="btn btn--ghost btn--danger" id="riskDeleteBtn" onclick="deleteRisk()" style="display: none; margin-right: auto;">Delete</button>
              <button type="button" class="btn btn--secondary" onclick="closeRiskModal()">Cancel</button>
              <button type="submit" class="btn btn--primary" id="riskSubmitBtn">Add Risk</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Resolve Risk Modal -->
      <div class="modal" id="resolveRiskModal">
        <div class="modal__overlay" onclick="closeResolveRiskModal()"></div>
        <div class="modal__container" style="max-width: 500px;">
          <div class="modal__header">
            <h2 class="modal__title">Resolve Risk</h2>
            <button class="modal__close" onclick="closeResolveRiskModal()">&times;</button>
          </div>
          <form id="resolveRiskForm" onsubmit="handleResolveRisk(event)">
            <input type="hidden" id="resolveRiskId" value="">
            <div class="modal__body">
              <p id="resolveRiskTitle" style="margin-bottom: 16px; font-weight: 500;"></p>
              <div class="form-group">
                <label class="form-label" for="resolutionNotes">Resolution Notes</label>
                <textarea id="resolutionNotes" class="form-textarea" rows="3" placeholder="Describe how the risk was resolved..."></textarea>
              </div>
            </div>
            <div class="modal__footer">
              <button type="button" class="btn btn--secondary" onclick="closeResolveRiskModal()">Cancel</button>
              <button type="submit" class="btn btn--primary">Mark as Resolved</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Task Modal -->
      <div class="modal" id="taskModal">
        <div class="modal__overlay" onclick="closeTaskModal()"></div>
        <div class="modal__container" style="max-width: 600px;">
          <div class="modal__header">
            <h2 class="modal__title" id="taskModalTitle">Add Task</h2>
            <button class="modal__close" onclick="closeTaskModal()">&times;</button>
          </div>
          <form id="taskForm" onsubmit="handleTaskSubmit(event)">
            <input type="hidden" id="taskId" value="">
            <div class="modal__body">
              <div class="form-group">
                <label class="form-label" for="taskTitle">Title *</label>
                <input type="text" id="taskTitle" class="form-input" required placeholder="Task title">
              </div>

              <div class="form-group">
                <label class="form-label" for="taskDescription">Description</label>
                <textarea id="taskDescription" class="form-textarea" rows="2" placeholder="Task details"></textarea>
              </div>

              <div class="grid grid--2" style="gap: 16px;">
                <div class="form-group">
                  <label class="form-label" for="taskPriority">Priority</label>
                  <select id="taskPriority" class="form-select">
                    <option value="low">Low</option>
                    <option value="medium" selected>Medium</option>
                    <option value="high">High</option>
                    <option value="urgent">Urgent</option>
                  </select>
                </div>
                <div class="form-group">
                  <label class="form-label" for="taskDueDate">Due Date</label>
                  <input type="date" id="taskDueDate" class="form-input">
                </div>
              </div>

              <div class="grid grid--2" style="gap: 16px;">
                <div class="form-group">
                  <label class="form-label" for="taskAssignee">Assignee</label>
                  <select id="taskAssignee" class="form-select">
                    <option value="">Unassigned</option>
                  </select>
                </div>
                <div class="form-group">
                  <label class="form-label" for="taskCustomer">Customer</label>
                  <select id="taskCustomer" class="form-select">
                    <option value="">No customer</option>
                  </select>
                </div>
              </div>

              <!-- Status (only shown when editing) -->
              <div class="form-group" id="taskStatusGroup" style="display: none;">
                <label class="form-label" for="taskStatus">Status</label>
                <select id="taskStatus" class="form-select">
                  <option value="open">Open</option>
                  <option value="in_progress">In Progress</option>
                  <option value="completed">Completed</option>
                  <option value="cancelled">Cancelled</option>
                </select>
              </div>
            </div>
            <div class="modal__footer">
              <button type="button" class="btn btn--ghost btn--danger" id="taskDeleteBtn" onclick="deleteTask()" style="display: none; margin-right: auto;">Delete</button>
              <button type="button" class="btn btn--secondary" onclick="closeTaskModal()">Cancel</button>
              <button type="submit" class="btn btn--primary" id="taskSubmitBtn">Add Task</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Engagement Modal -->
      <div class="modal" id="engagementModal">
        <div class="modal__overlay" onclick="closeEngagementModal()"></div>
        <div class="modal__container" style="max-width: 600px;">
          <div class="modal__header">
            <h2 class="modal__title" id="engagementModalTitle">Log Engagement</h2>
            <button class="modal__close" onclick="closeEngagementModal()">&times;</button>
          </div>
          <form id="engagementForm" onsubmit="handleEngagementSubmit(event)">
            <input type="hidden" id="engagementId" value="">
            <div class="modal__body">
              <div class="form-group">
                <label class="form-label" for="engagementType">Type *</label>
                <select id="engagementType" class="form-select" required>
                  <option value="meeting">Meeting</option>
                  <option value="call">Call</option>
                  <option value="email">Email</option>
                  <option value="qbr">QBR</option>
                  <option value="training">Training</option>
                  <option value="support">Support</option>
                  <option value="other">Other</option>
                </select>
              </div>

              <div class="form-group">
                <label class="form-label" for="engagementSubject">Subject *</label>
                <input type="text" id="engagementSubject" class="form-input" required placeholder="Brief subject of the engagement">
              </div>

              <div class="grid grid--2" style="gap: 16px;">
                <div class="form-group">
                  <label class="form-label" for="engagementDate">Date *</label>
                  <input type="date" id="engagementDate" class="form-input" required>
                </div>
                <div class="form-group">
                  <label class="form-label" for="engagementDuration">Duration (minutes)</label>
                  <input type="number" id="engagementDuration" class="form-input" min="1" placeholder="30">
                </div>
              </div>

              <div class="form-group">
                <label class="form-label" for="engagementAttendees">Attendees</label>
                <input type="text" id="engagementAttendees" class="form-input" placeholder="Names separated by commas">
              </div>

              <div class="form-group">
                <label class="form-label" for="engagementNotes">Notes</label>
                <textarea id="engagementNotes" class="form-textarea" rows="4" placeholder="Key discussion points, outcomes, action items..."></textarea>
              </div>

              <div class="form-group">
                <label class="form-label" for="engagementOutcome">Outcome</label>
                <select id="engagementOutcome" class="form-select">
                  <option value="">Select outcome...</option>
                  <option value="positive">Positive</option>
                  <option value="neutral">Neutral</option>
                  <option value="negative">Negative</option>
                  <option value="follow_up_required">Follow-up Required</option>
                </select>
              </div>
            </div>
            <div class="modal__footer">
              <button type="button" class="btn btn--ghost btn--danger" id="engagementDeleteBtn" onclick="deleteEngagement()" style="display: none; margin-right: auto;">Delete</button>
              <button type="button" class="btn btn--secondary" onclick="closeEngagementModal()">Cancel</button>
              <button type="submit" class="btn btn--primary" id="engagementSubmitBtn">Log Engagement</button>
            </div>
          </form>
        </div>
      </div>
    </main>

    <!-- Mobile Bottom Navigation -->
    <nav class="bottom-nav">
      <ul class="bottom-nav__items">
        <li>
          <a href="index.html" class="bottom-nav__link">
            <svg viewBox="0 0 32 32"><path d="M16 2L2 12v18h10V18h8v12h10V12L16 2z"/></svg>
            Home
          </a>
        </li>
        <li>
          <a href="customers.html" class="bottom-nav__link active">
            <svg viewBox="0 0 32 32"><path d="M28 10h-6V6c0-1.1-.9-2-2-2h-8c-1.1 0-2 .9-2 2v4H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h24c1.1 0 2-.9 2-2V12c0-1.1-.9-2-2-2z"/></svg>
            Customers
          </a>
        </li>
        <li>
          <a href="#" class="bottom-nav__link">
            <svg viewBox="0 0 32 32"><path d="M17 15V7h-2v8H7v2h8v8h2v-8h8v-2h-8z"/></svg>
            Add
          </a>
        </li>
        <li>
          <a href="tasks.html" class="bottom-nav__link">
            <svg viewBox="0 0 32 32"><path d="M14 21.5l-5-4.96L7.59 18 14 24.35 25.41 13 24 11.59 14 21.5z"/></svg>
            Tasks
          </a>
        </li>
        <li>
          <a href="#" class="bottom-nav__link">
            <svg viewBox="0 0 32 32"><path d="M4 6h24v2H4zm0 9h24v2H4zm0 9h24v2H4z"/></svg>
            More
          </a>
        </li>
      </ul>
    </nav>
  </div>

  <script src="js/auth.js?v=3"></script>
  <script src="js/api.js?v=11"></script>
  <script src="js/customer-detail.js?v=19"></script>
</body>
</html>
